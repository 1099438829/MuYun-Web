<!DOCTYPE HTML>

<!-- Author:AIOS | Date:2017-03-05 | QQ:1070053575 -->

<title>MuYun</title>
<!-- 设置页面文件编码 -->
<meta charset=UTF-8>
<!-- 移动端宽度及缩放设置 -->
<meta name=viewport content='width=device-width,user-scalable=0,initial-scale=1.0'>
<!-- CSS初级Reset -->
<link rel=stylesheet href=../../contents/css/reset.min.css>
<!-- CSS二级Reset及组件 -->
<link rel=stylesheet href=../../contents/css/base.css>
<!-- 当前页面CSS -->
<link rel=stylesheet href=../../contents/css/home.css>

<div id=home v-cloak @contextmenu.prevent>
	<!-- 页面顶栏组件 - header.vue -->
	<a-head :sel='"file"'></a-head>
	<!-- 页面侧栏组件 - aside.vue & ext_item.vue -->
	<a-side :info=info :list=ext_list :ext=ext :exit=Exit></a-side>
	<!-- 页面核心部分 -->
	<main class='dib pr mn'>
		<!-- 资源管理器顶部操作区 -->
		<header class=mn_hd>
			<!-- 操作区左侧 -->
			<div class=mn_hd_l>
				<!-- 上传 -->
				<label for=to_file class='dib f14 tc cp vam mn_button type_file'>
					<div class='dib mn_button_img'>
						<i class=dib></i>
					</div>
					<span class=dib>上传</span>
				</label>
				<input type=file id=to_file class=dn>
				<!-- 新建文件夹 -->
				<a class='dib f14 tc vam mn_button type_new' v-show='ext == "all"' @click.prevent=NewDir>
					<div class='dib mn_button_img'>
						<i class=dib></i>
					</div>
					<span class=dib>新建文件夹</span>
				</a>
				<!-- 操作菜单 -->
				<div class=mn_hd_menu v-show=index.length>
					<a class='dib f14 tc vam mn_button type_down'>下载</a>
					<a class='dib f14 tc vam mn_button type_rename' @click.prevent=ReName>重命名</a>
					<a class='dib f14 tc vam mn_button type_copy'>复制到</a>
					<a class='dib f14 tc vam mn_button type_move'>移动到</a>
					<a class='dib f14 tc vam mn_button type_more'>更多...</a>
					<a class='dib f14 tc vam mn_button type_del' @click.prevent=DelFile>删除</a>
				</div>
				<!-- 面包屑 -->
				<nav class=mn_trail>
					<a class=vam v-show='trail[1] && !trail[0].search' @click.prevent=GoBack>返回上一级</a>
					<a class='mn_trail_search vam' v-show=trail[0].search>搜索结果：</a>
					<a class='ellipsis vam dib' v-for='(item,index) in trail' v-show=item.name :title=item.name @click.prevent=TrailLink(index)>{{item.name}}</a>
				</nav>
			</div>
			<!-- 操作区右侧 -->
			<div class='mn_hd_r pa'>
				<!-- 搜索 -->
				<div class=dib>
					<label for=to_search class='mn_search pa vam cp' title='开始搜索' @click=Search></label>
					<input id=to_search class=vam placeholder='请输入关键字' v-model.trim=search_text :style='{width:search_text?"150px":""}' @change=Search>
				</div>
				<!-- 切换显示模式 -->
				<img width=32 height=32 class='mn_mode icon' :src=img_mode @click=Toggle>
				<div class='mn_count f14'>
					<span @click=LoadTree>文件/文件夹 {{dir.length}}</span>
				</div>
			</div>
		</header>
		<!-- 资源管理器页眉 -->
		<div class='item_hd pr' :class=mode>
			<span class='item_all cp f14' :class='{sel:isAll}' @click=SelAll>全选</span>
			<div class='item_hd_check dib cp pa' :class='{sel:isAll}' @click=SelAll></div>
			<span class='item_hd_name cp f14' @click='Sort("name")'>文件名</span>
			<span class='item_hd_time cp f14' @click='Sort("time")'>创建日期</span>
			<span class='item_hd_size cp f14' @click='Sort("size")'>文件大小</span>
		</div>
		<!-- 资源管理器主体 -->
 		<ul class='mn_dir pa' :class=mode @contextmenu.prevent.stop=ShowMenu @click=Reset>
 			<li class=mn_dir_none v-if=!dir.length>
 				<div class=tc>
					<img alt='没有文件哦~' :src=img_none><br>
					<span>{{trail[0].search ? '找不到文件耶':'这里没有文件哦'}}</span>
				</div>
 			</li>
 			<!-- 文件列表项组件 - file_item.vue -->
			<a-item v-for='(item,index) in dir' :item=item :index=index :click=FileClick :menu=ShowMenu></a-item>
		</ul>
	</main>
	<!-- 右键菜单组件 - contextmenu.vue -->
	<keep-alive>
		<a-menu :context=file_context :index=file_index :fixed=file_fixed></a-menu>
	</keep-alive>
	<keep-alive>
		<a-menu :context=folder_context :fixed=folder_fixed></a-menu>
	</keep-alive>
	<!-- 文件目录树 -->
	<ul class=file_tree v-if=file_tree>
		<div class=file_tree_close title='关掉这个东东' @click='file_tree = ""'></div>
		<!-- 文件目录树组件 - file_tree.vue -->
		<a-tree v-for='item in file_tree' :item=item></a-tree>
	</ul>
</div>

<!-- Vue^2.1.10 -->
<script src=../../contents/js/vue.min.js></script>
<!-- 由webpack^2.2.1打包 -->
<script src=../../contents/js/home.js></script>