<!DOCTYPE HTML>

<!-- Author:AIOS | Date:2017-02-22 | QQ:1070053575 -->

<title>UserCenter</title>
<!-- 设置页面文件编码 -->
<meta charset=UTF-8>
<!-- 移动端宽度及缩放设置 -->
<meta name=viewport content='width=device-width,user-scalable=0,initial-scale=1.0'>
<!-- CSS初级Reset -->
<link rel=stylesheet href=../../contents/css/reset.min.css>
<!-- CSS二级Reset及组件 -->
<link rel=stylesheet href=../../contents/css/base.css>
<!-- 当前页面CSS -->
<link rel=stylesheet href=../../contents/css/personal.css>

<div id=personal v-cloak>
	<!-- 页面顶栏组件 - header.vue -->
	<a-head></a-head>
	<!-- 页面侧栏组件 - aside.vue & ext_item.vue -->
	<a-side :info=info :list=ext_list :ext=ext :img=head_img :exit=Exit></a-side>
	<!-- 页面核心部分 -->
	<main class='dib pr mn'>
		<!-- 用于清空头像选择控件内容 -->
		<form name=head_img></form>
		<!-- 个人信息部分 -->
		<form class='mn_self pa' v-if='ext=="self"' @submit.prevent>
			<table>
				<tr v-if=isEdit>
					<td colspan=2 class=tc>
						<span class=f14>个人资料</span>
				<tr>
					<td v-if=isEdit>
						<label class=f14>昵称：</label>
					<td v-else>
						<label class='mn_img cp' for=self_img>
							<img width=70 height=70 class=img0 :src=head_img>
							<div class=tc>修改</div>
						</label>
						<input type=file class=dn id=self_img accept=image/jpeg,image/png form=head_img @change=PostImg>
					<td>
						<input class='mn_self_text vam f14' maxlength=8 v-model.trim=name :disabled=!isEdit v-focus=name>
						<i class='icon vam cp' v-if=isEdit @click=ClearName></i>
				<tr>
					<td>
						<label class=f14>性别：</label>
					<td>
						<input type=radio id=man value=man v-model=sex>
						<label class='mn_radio cp f14' for=man :class='{sel:sex=="man"}' v-if=isEdit>男</label>
						<input type=radio id=woman value=woman v-model=sex>
						<label class='mn_radio cp f14' for=woman :class='{sel:sex!="man"}' v-if=isEdit>女</label>
						<em class=f14 v-if=!isEdit>{{sex=='man'?'男':'女'}}</em>
				<tr>
					<td>
						<label class=f14>生日：</label>
					<td>
						<template v-if=isEdit>
							<select v-model=birth_a @change=MakeDay>
								<option v-for='value in year' :value=value>{{value+'年'}}</option>
							</select>
							<select v-model=birth_b @change=MakeDay>
								<option v-for='value in month' :value=value>{{value+'月'}}
							</select>
							<select v-model=birth_c>
								<option v-for='value in day' :value=value>{{value+'日'}}
							</select>
						</template>
						<em class=f14 v-else>{{birth_a?birth_a+'年'+birth_b+'月'+birth_c+'日':'未填写'}}</em>
				<tr>
					<td>
						<label class=f14>所在地：</label>
					<td class=mn_live>
						<template v-if=isEdit>
							<select v-model=live_a>
								<option v-for='value in area_a'>{{value}}
							</select>
							<select v-model=live_b v-show=live_a :style='{width:(live_b&&live_b.length*14)+18+"px"}'>
								<option v-for='value in area_b'>{{value}}
							</select>
							<select v-model=live_c v-show=area_c :style='{width:(live_c&&live_c.length*14)+18+"px"}'>
								<option v-for='value in area_c'>{{value}}
							</select>
						</template>
						<em class=f14 v-else>{{`${live_a} ${live_b} ${live_c}`.trim()||'未填写'}}</em>
				<tr>
					<td>
						<label class=f14>学校/企业：</label>
					<td>
						<input class='mn_self_text vam f14 ellipsis' maxlength=50 v-model.trim=organ :disabled=!isEdit v-focus=organ>
				<tr v-if=!isEdit>
					<td>
						<span class=f14>注册日期：</span>
					<td>
						<span class=f14>{{reg_date}}</span>
				<tr>
					<td>
						<em class=f14>个人资料完成度：</em>
					<td class='mn_progress pr'>
						<div :style='{width:done*2+"px"}'></div>
						<em class='pa f14'>{{done+'%'}}</em>
				<tr>
					<td colspan=2 class=tc>
						<button :type='[isEdit?"submit":"button"]' @click=Toggle>{{isEdit?'保存':'编辑'}}</button>
			</table>
		</form>
		<ul class='mn_secure pa' v-else>
			<li class=pr :class='{menu:menu=="mobile"}'>
				<span>绑定手机</span>
				<span>{{mobile}}</span>
				<span class=cp @click='ShowMenu("mobile")'>修改</span>
				<form class='mobile tc' @submit.prevent=ReMobile>
					<div>
						<label class=f14>输入验证码</label>
						<input class=mn_secure_sms v-model=sms v-focus=mobile>
						<button @click.prevent=GetSMS>获取</button>
					</div>
					<div>
						<label class=f14>输入新号码</label>
						<input v-model.trim=new_mobile>
					</div>
					<div>
						<button type=submit>确定</button>
						<button class=cancel @click.prevent=ShowMenu>取消</button>
					</div>
				</form>
			<li class=pr :class='{menu:menu=="email"}'>
				<span>绑定邮箱</span>
				<span>{{email}}</span>
				<span class=cp @click='ShowMenu("email")'>修改</span>
				<form class='email tc' @submit.prevent=ReEmail>
					<div>
						<label class=f14>输入新邮箱</label>
						<input type=email v-model.trim=new_email v-focus=email>
					</div>
					<div>
						<button type=submit>确定</button>
						<button class=cancel @click.prevent=ShowMenu>取消</button>
					</div>
				</form>
			<li class=pr :class='{menu:menu=="pword"}'>
				<span>修改密码</span>
				<span class=cp @click='ShowMenu("pword")'>修改</span>
				<form class='pword tc'>
					<div class=mn_secure_pword>
						<label class=f14>输入旧密码</label>
						<input type=password v-model=pword v-focus=pword>
					</div>
					<div class=mn_secure_pword>
						<label class=f14>输入新密码</label>
						<input type=password v-model=new_pword>
					</div>
					<div>
						<label class=f14>重新输入新密码</label>
						<input type=password v-model=re_new_pword>
					</div>
					<div>
						<button type=submit>确定</button>
						<button class=cancel @click.prevent=ShowMenu>取消</button>
					</div>
				</form>
		</ul>
	</main>
</div>

<!-- Vue^2.1.10 -->
<script src=../../contents/js/vue.min.js></script>
<!-- 由webpack^2.2.1打包 -->
<script src=../../contents/js/personal.js></script>